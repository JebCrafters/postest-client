{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/jebcr/Desktop/Projects/web_designe/React.js/reserve project/my_project/client/notforgot/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/jebcr/Desktop/Projects/web_designe/React.js/reserve project/my_project/client/notforgot/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{setUser}from\"../reducers/userReducer\";export var registration=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){var randomColor,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:randomColor=Math.floor(Math.random()*16777215).toString(16);_context.prev=1;_context.next=4;return axios.post(\"https://postes.herokuapp.com/api/auth/registration\",{email:email,password:password,color:randomColor});case 4:response=_context.sent;alert(response.data.message);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);alert(_context.t0.response.data.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function registration(_x,_x2){return _ref.apply(this,arguments);};}();export var login=function login(email,password,color){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"https://postes.herokuapp.com/api/auth/login\",{email:email,password:password,color:color});case 3:response=_context2.sent;// console.log (response.data.user.color)\ndispatch(setUser(response.data.user));localStorage.setItem('token',response.data.token);localStorage.setItem('color',response.data.user.color);_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return function(_x3){return _ref2.apply(this,arguments);};}();};export var auth=function auth(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"https://postes.herokuapp.com/api/auth/auth\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});case 3:response=_context3.sent;dispatch(setUser(response.data.user));localStorage.setItem('token',response.data.token);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);// console.log(e.response.data)\nlocalStorage.removeItem('token');case 11:case\"end\":return _context3.stop();}},_callee3,null,[[0,8]]);}));return function(_x4){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"names":["axios","setUser","registration","email","password","randomColor","Math","floor","random","toString","post","color","response","alert","data","message","login","dispatch","user","localStorage","setItem","token","auth","get","headers","Authorization","getItem","removeItem"],"sources":["C:/Users/jebcr/Desktop/Projects/web_designe/React.js/reserve project/my_project/client/notforgot/src/action/user.js"],"sourcesContent":["import axios from 'axios'\r\nimport {setUser} from \"../reducers/userReducer\";\r\n\r\nexport const registration = async (email, password) => {\r\n    var randomColor = Math.floor(Math.random()*16777215).toString(16);\r\n    try {\r\n        const response = await axios.post(`https://postes.herokuapp.com/api/auth/registration`, {\r\n            email,\r\n            password,\r\n            color:randomColor\r\n        })\r\n        alert(response.data.message)\r\n    } catch (e) {\r\n        alert(e.response.data.message)\r\n    }\r\n\r\n}\r\nexport const login =  (email, password,color ) => {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await axios.post(`https://postes.herokuapp.com/api/auth/login`, {\r\n                email,\r\n                password,\r\n                color\r\n            })\r\n            // console.log (response.data.user.color)\r\n            dispatch(setUser(response.data.user))\r\n            localStorage.setItem('token', response.data.token)\r\n            localStorage.setItem('color', response.data.user.color)\r\n        } catch (e) {\r\n            // console.log(e.response.data.message)\r\n        }\r\n    }\r\n}\r\n\r\nexport const auth =  () => {\r\n    return async dispatch => {\r\n        try {\r\n            const response = await axios.get(`https://postes.herokuapp.com/api/auth/auth`,\r\n                {headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}}\r\n            )\r\n            dispatch(setUser(response.data.user))\r\n            localStorage.setItem('token', response.data.token)\r\n        } catch (e) {\r\n            // console.log(e.response.data)\r\n            localStorage.removeItem('token')\r\n        }\r\n    }\r\n}"],"mappings":"4XAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAAQC,OAAO,KAAO,yBAAyB,CAE/C,MAAO,IAAMC,aAAY,4FAAG,iBAAOC,KAAK,CAAEC,QAAQ,4IAC1CC,WAAW,CAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,CAAC,QAAQ,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,uCAEtCT,MAAK,CAACU,IAAI,sDAAuD,CACpFP,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QAAQ,CACRO,KAAK,CAACN,WACV,CAAC,CAAC,QAJIO,QAAQ,eAKdC,KAAK,CAACD,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC,gFAE5BF,KAAK,CAAC,YAAED,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC,oEAGrC,kBAbYb,aAAY,gDAaxB,CACD,MAAO,IAAMc,MAAK,CAAI,QAATA,MAAK,CAAKb,KAAK,CAAEC,QAAQ,CAACO,KAAK,CAAM,CAC9C,kGAAO,kBAAMM,QAAQ,4KAEUjB,MAAK,CAACU,IAAI,+CAAgD,CAC7EP,KAAK,CAALA,KAAK,CACLC,QAAQ,CAARA,QAAQ,CACRO,KAAK,CAALA,KACJ,CAAC,CAAC,QAJIC,QAAQ,gBAKd;AACAK,QAAQ,CAAChB,OAAO,CAACW,QAAQ,CAACE,IAAI,CAACI,IAAI,CAAC,CAAC,CACrCC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAER,QAAQ,CAACE,IAAI,CAACO,KAAK,CAAC,CAClDF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAER,QAAQ,CAACE,IAAI,CAACI,IAAI,CAACP,KAAK,CAAC,yJAI9D,iEACL,CAAC,CAED,MAAO,IAAMW,KAAI,CAAI,QAARA,KAAI,EAAU,CACvB,kGAAO,kBAAML,QAAQ,4KAEUjB,MAAK,CAACuB,GAAG,8CAC5B,CAACC,OAAO,CAAC,CAACC,aAAa,kBAAWN,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC,CAAE,CAAC,CAAC,CACtE,QAFKd,QAAQ,gBAGdK,QAAQ,CAAChB,OAAO,CAACW,QAAQ,CAACE,IAAI,CAACI,IAAI,CAAC,CAAC,CACrCC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAER,QAAQ,CAACE,IAAI,CAACO,KAAK,CAAC,oFAElD;AACAF,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC,sEAEvC,iEACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}